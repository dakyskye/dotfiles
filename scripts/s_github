#!/bin/bash

source "$SCRIPTS/s_colours.sh"

while true; do
	UNREAD="$(gh api notifications | jq length)"
	[[ -z $LAST_COUNT ]] && LAST_COUNT=$UNREAD
	if [[ "$UNREAD" -eq 0 ]]; then
		echo " $UNREAD"
		LAST_COUNT=0
	else
		[[ $UNREAD -gt $LAST_COUNT ]] && dunstify -a 'GitHub' "You've got (a) new github notification(s)"
		echo "${FG_RED} ${UNREAD}${FG_NORMAL}"
		LAST_COUNT=$UNREAD
	fi
	sleep 1m
done
